## Performance tickets

Запуски осуществлялись при значении параметра 10 000.

### Количество используемых параллельных потоков больше числа процессоров

- Программа задействует пул потоков с очень большим начальным числом (3000), эти потоки конкурируют за физические процессоры.

![Threads](Threads.png)

Ожидаемое поведение: программа задействует количество потоков по числу ядер.

См. CPU.snapshot

### При работе программы генерируется большое количество временных неиспользуемых объектов

- Программа выделяет большое количество экземляров BigIntegerIteratorAfterFix и лямбда-выражений (снепшот HeapDump.snapshot).

![Allocations](Allocations.png)

- Большое количество времени уходит на сборку мусора.

![GC](GC.png)

### Неэффективные структуры данных

- Коллекция `primeNumbers` не участвует в параллельной работе, поэтому делать этот список `synchronizedList` не имеет смысла (все операции этого класса помечены synchronized).

![CPU_hot_spot](CPU_hot_spot.png)

### Control-flow на базе исключений

- Вместо простого условия порождаются и отлавливаются исключения. Порождение исключений и наполнение стека занимает много времени.
```
try {
    isPrime(primeNumbers, candidate);
} catch (Exception e) {
    primeNumbersToRemove.add(candidate);
}
```